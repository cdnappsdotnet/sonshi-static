<html>

<head>
	<title>ƒêƒÉng k√Ω Nh·∫≠n qu√† t·∫∑ng</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">

	<!-- bootstrap styles -->
	<script id="Messenger" src="//connect.facebook.com/en_US/messenger.Extensions.js"></script>

	<style>
		input[type=text], select, textarea {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}
input[type=tel], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}


input[type=submit] {
  width: 100%;
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=submit]:hover {
  background-color: #45a049;
}

div {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
}
.footer {
	margin-top: 25px;
	padding: 15px;
	position: fixed;
	bottom: 0;
	width: 100%;
}
#done-btn {
	cursor: pointer;
}
.button {
  background-color: #0078D7; /* Green */
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}
.button4 {border-radius: 12px;}
p.sansserif {
  font-family: Arial, Helvetica, sans-serif;
  
}
</style>
	
</head>

<body style="background-color: rgb(0, 120, 215);">

	<!-- messenger extensions sdk -->
	<script type="text/javascript">
		(function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) {
				return;
			}
			js = d.createElement(s);
			js.id = id;
			js.src = "//connect.facebook.com/en_US/messenger.Extensions.js";
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'Messenger'));
	</script>
	<!-- /messenger extensions sdk -->
	<center><img src="blank.jpg" height="0"></center>
	<h3>
		<center>
			<p class="sansserif" style="color:#FFFFFF;">ƒêƒÉng k√Ω Nh·∫≠n qu√† t·∫∑ng</p>
		</center>
	</h3>
	<div class="container" style="max-width: 50rem; margin-left: auto; margin-right: auto">

		<!--<p><center><span style="color: #ff0000;">N·∫øu b·ªã l·ªói nh·∫≠p th√¥ng tin (tr√™n ƒëi·ªán tho·∫°i), xin h√£y chuy·ªÉn b√†n ph√≠m sang ch·∫ø ƒë·ªô g√µ ti·∫øng Anh v√† ti·∫øp t·ª•c b·ªè d·∫•u theo ki·ªÉu Telex ho·∫∑c VNI</span></center></p> -->
		<form name="frm" _lpchecked="1">
			<center>
				<p class="sansserif">üë§ H·ªç t√™n ƒë·∫ßy ƒë·ªß:</p>
				<input id="hoten" type="text" name="hoten" class="form-control" style="text-align: center; color: red; background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABHklEQVQ4EaVTO26DQBD1ohQWaS2lg9JybZ+AK7hNwx2oIoVf4UPQ0Lj1FdKktevIpel8AKNUkDcWMxpgSaIEaTVv3sx7uztiTdu2s/98DywOw3Dued4Who/M2aIx5lZV1aEsy0+qiwHELyi+Ytl0PQ69SxAxkWIA4RMRTdNsKE59juMcuZd6xIAFeZ6fGCdJ8kY4y7KAuTRNGd7jyEBXsdOPE3a0QGPsniOnnYMO67LgSQN9T41F2QGrQRRFCwyzoIF2qyBuKKbcOgPXdVeY9rMWgNsjf9ccYesJhk3f5dYT1HX9gR0LLQR30TnjkUEcx2uIuS4RnI+aj6sJR0AM8AaumPaM/rRehyWhXqbFAA9kh3/8/NvHxAYGAsZ/il8IalkCLBfNVAAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%; cursor: auto;"
				 value="">

				<p class="sansserif">‚òéÔ∏è ƒêi·ªán tho·∫°i li√™n h·ªá:</p>
				<input id="dienthoai" type="tel" name="dienthoai" class="form-control" style="text-align: center;" value="0">
				<p class="sansserif">‚è≤ Ng√†y sinh:</p>
				<input id="ngaysinh" type="date" name="ngaysinh" class="form-control" style="text-align: center;" value="0" value="2000-01-01">
				<p class="sansserif">üè° ƒê·ªãa ch·ªâ giao h√†ng:</p>
				<select id="tinh_tp-select" name="tinh_tp">
					<option disabled value="-1" selected>Th√†nh ph·ªë/T·ªânh</option>
					<option value="01">Th√†nh ph·ªë H√† N·ªôi</option>
					<option value="02">T·ªânh H√† Giang</option>
					<option value="04">T·ªânh Cao B·∫±ng</option>
					<option value="06">T·ªânh B·∫Øc K·∫°n</option>
					<option value="08">T·ªânh Tuy√™n Quang</option>
					<option value="10">T·ªânh L√†o Cai</option>
					<option value="11">T·ªânh ƒêi·ªán Bi√™n</option>
					<option value="12">T·ªânh Lai Ch√¢u</option>
					<option value="14">T·ªânh S∆°n La</option>
					<option value="15">T·ªânh Y√™n B√°i</option>
					<option value="17">T·ªânh Ho√† B√¨nh</option>
					<option value="19">T·ªânh Th√°i Nguy√™n</option>
					<option value="20">T·ªânh L·∫°ng S∆°n</option>
					<option value="22">T·ªânh Qu·∫£ng Ninh</option>
					<option value="24">T·ªânh B·∫Øc Giang</option>
					<option value="25">T·ªânh Ph√∫ Th·ªç</option>
					<option value="26">T·ªânh Vƒ©nh Ph√∫c</option>
					<option value="27">T·ªânh B·∫Øc Ninh</option>
					<option value="30">T·ªânh H·∫£i D∆∞∆°ng</option>
					<option value="31">Th√†nh ph·ªë H·∫£i Ph√≤ng</option>
					<option value="33">T·ªânh H∆∞ng Y√™n</option>
					<option value="34">T·ªânh Th√°i B√¨nh</option>
					<option value="35">T·ªânh H√† Nam</option>
					<option value="36">T·ªânh Nam ƒê·ªãnh</option>
					<option value="37">T·ªânh Ninh B√¨nh</option>
					<option value="38">T·ªânh Thanh H√≥a</option>
					<option value="40">T·ªânh Ngh·ªá An</option>
					<option value="42">T·ªânh H√† Tƒ©nh</option>
					<option value="44">T·ªânh Qu·∫£ng B√¨nh</option>
					<option value="45">T·ªânh Qu·∫£ng Tr·ªã</option>
					<option value="46">T·ªânh Th·ª´a Thi√™n Hu·∫ø</option>
					<option value="48">Th√†nh ph·ªë ƒê√† N·∫µng</option>
					<option value="49">T·ªânh Qu·∫£ng Nam</option>
					<option value="51">T·ªânh Qu·∫£ng Ng√£i</option>
					<option value="52">T·ªânh B√¨nh ƒê·ªãnh</option>
					<option value="54">T·ªânh Ph√∫ Y√™n</option>
					<option value="56">T·ªânh Kh√°nh H√≤a</option>
					<option value="58">T·ªânh Ninh Thu·∫≠n</option>
					<option value="60">T·ªânh B√¨nh Thu·∫≠n</option>
					<option value="62">T·ªânh Kon Tum</option>
					<option value="64">T·ªânh Gia Lai</option>
					<option value="66">T·ªânh ƒê·∫Øk L·∫Øk</option>
					<option value="67">T·ªânh ƒê·∫Øk N√¥ng</option>
					<option value="68">T·ªânh L√¢m ƒê·ªìng</option>
					<option value="70">T·ªânh B√¨nh Ph∆∞·ªõc</option>
					<option value="72">T·ªânh T√¢y Ninh</option>
					<option value="74">T·ªânh B√¨nh D∆∞∆°ng</option>
					<option value="75">T·ªânh ƒê·ªìng Nai</option>
					<option value="77">T·ªânh B√† R·ªãa - V≈©ng T√†u</option>
					<option value="79">Th√†nh ph·ªë H·ªì Ch√≠ Minh</option>
					<option value="80">T·ªânh Long An</option>
					<option value="82">T·ªânh Ti·ªÅn Giang</option>
					<option value="83">T·ªânh B·∫øn Tre</option>
					<option value="84">T·ªânh Tr√† Vinh</option>
					<option value="86">T·ªânh Vƒ©nh Long</option>
					<option value="87">T·ªânh ƒê·ªìng Th√°p</option>
					<option value="89">T·ªânh An Giang</option>
					<option value="91">T·ªânh Ki√™n Giang</option>
					<option value="92">Th√†nh ph·ªë C·∫ßn Th∆°</option>
					<option value="93">T·ªânh H·∫≠u Giang</option>
					<option value="94">T·ªânh S√≥c TrƒÉng</option>
					<option value="95">T·ªânh B·∫°c Li√™u</option>
					<option value="96">T·ªânh C√† Mau</option>
				</select><br>
				<select id="quan_huyen-select" name="quan_huyen" style="display: inline;">
					<option value="-1" disabled selected>Qu·∫≠n/Huy·ªán</option>
				</select><br>
				<select id="phuong_xa-select" name="phuong_xa" style="display: inline;">
					<option value="-1" disabled selected>X√£/Ph∆∞·ªùng/Th·ªã tr·∫•n</option>
				</select>

				<input id="diachi-input" type="text" name="diachi" class="form-control" style="text-align: center;" value="" placeholder="S·ªë nh√† - ƒê∆∞·ªùng">


			</center>
		</form>
		<center><button type="submit" onclick="return submitForm();" id="done-btn" class="button button4">üì§G·ª¨I TH√îNG TIN</button></center>


		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"></script>
		<script type="text/javascript">

			// Update list qu·∫≠n/huy·ªán khi t·ªânh/th√†nh thay ƒë·ªïi
			$("#tinh_tp-select").change(function () {

				// X√°c ƒë·ªãnh t·ªânh
				parentID = $(this).children("option:selected").first().val();

				if (parentID != "-1") {
					$.get( "quan-huyen/"+parentID+".json", function( data ) {
						
						// X√≥a d·ªØ li·ªáu x√£ ph∆∞·ªùng
						$("#phuong_xa-select").html('<option value="-1" disabled selected>X√£/Ph∆∞·ªùng/Th·ªã tr·∫•n</option>');
						

						// C·∫≠p nh·∫≠t d·ªØ li·ªáu qu·∫≠n/huy·ªán
						$("#quan_huyen-select").html('<option value="-1" disabled selected>Qu·∫≠n/Huy·ªán</option><');

						for (var key in data) {
							if (data.hasOwnProperty(key)) {
								$("#quan_huyen-select").append('<option value="'+key+'">'+data[key]['name_with_type']+'</option>');
							}
						}

					});
				}

			});


			// Update list ph∆∞·ªùng / x√£ khi qu·∫≠n / huy·ªán thay ƒë·ªïi
			$("#quan_huyen-select").change(function () {

				// X√°c ƒë·ªãnh qu·∫≠n/huy·ªán
				parentID = $(this).children("option:selected").first().val();

				if (parentID != "-1") {
					$.get( "xa-phuong/"+parentID+".json", function( data ) {
						
						// C·∫≠p nh·∫≠t d·ªØ li·ªáu x√£ ph∆∞·ªùng
						$("#phuong_xa-select").html('<option value="-1" disabled selected>X√£/Ph∆∞·ªùng/Th·ªã tr·∫•n</option>');

						for (var key in data) {
							if (data.hasOwnProperty(key)) {
								$("#phuong_xa-select").append('<option value="'+key+'">'+data[key]['name_with_type']+'</option>');
							}
						}

					});
				}

			});

		</script>
	</div>

	<script type="text/javascript">

		var getUrlParameter = function getUrlParameter(sParam) {
			var sPageURL = window.location.search.substring(1),
				sURLVariables = sPageURL.split('&'),
				sParameterName,
				i;

			for (i = 0; i < sURLVariables.length; i++) {
				sParameterName = sURLVariables[i].split('=');

				if (sParameterName[0] === sParam) {
					return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
				}
			}
		};

		function submitForm() {
			if (document.forms['frm'].hoten.value === "") {
				alert("B·∫°n ch∆∞a ƒëi·ªÅn h·ªç t√™n");
			} else if (document.forms['frm'].dienthoai.value.length < 10 || document.forms['frm'].dienthoai.value.length > 13) {
				alert("B·∫°n ch∆∞a ƒëi·ªÅn ho·∫∑c sai s·ªë ƒëi·ªán tho·∫°i");
			} else if (document.forms['frm'].tinh_tp.value === "Th√†nh ph·ªë/T·ªânh" || document.forms['frm'].tinh_tp.value === "-1") {
				alert("B·∫°n ch∆∞a ch·ªçn T·ªânh/Th√†nh ph·ªë");
			} else if (document.forms['frm'].quan_huyen.value === "Qu·∫≠n/Huy·ªán" || document.forms['frm'].quan_huyen.value === "-1") {
				alert("B·∫°n ch∆∞a ch·ªçn Qu·∫≠n/Huy·ªán");
			} else if (document.forms['frm'].phuong_xa.value === "X√£/Ph∆∞·ªùng/Th·ªã tr·∫•n" || document.forms['frm'].phuong_xa.value === "-1") {
				alert("B·∫°n ch∆∞a ch·ªçn Ph∆∞·ªùng/X√£");
			} else if (document.forms['frm'].diachi.value === "") {
				alert("B·∫°n ch∆∞a ƒëi·ªÅn ƒë·ªãa ch·ªâ nh√†, t√™n ƒë∆∞·ªùng");
			} else {

				diachi = $("#diachi-input").val()
					+ ", " + $("#phuong_xa-select option:selected").text()
					+ ", " + $("#quan_huyen-select option:selected").text()
					+ ", " + $("#tinh_tp-select option:selected").text();

				dienthoai = $("#dienthoai").val();
				hoten = $("#hoten").val();
				subscriber_id = getUrlParameter("subscriber_id");

				date = new Date($('#ngaysinh').val());
				day = date.getDate();
				month = date.getMonth() + 1;
				year = date.getFullYear();
				ngaysinh = [day, month, year].join('-')

				$.ajax({
					type: 'POST',
					url: 'https://sonshi-official.herokuapp.com/create-new-data-entry',
					data: {
						"subscriber_id": subscriber_id,
						"hoten": hoten,
						"diachi": diachi,
						"ngaysinh": ngaysinh,
						"dienthoai": dienthoai
					},
					dataType: 'json',
					success: function (data) {
						console.log(data);
						MessengerExtensions.requestCloseBrowser();
					}
				});

				// MessengerExtensions.requestCloseBrowser();

			} //return true;
		}
	</script>

</body>

</html>